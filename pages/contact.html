<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Us</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../styles/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50">
  <!-- Navigation -->
  <nav class="bg-white shadow-lg sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex justify-between items-center py-4 space-x-6">
        <h1 class="text-xl font-bold text-blue-600">CodewithJi</h1>
        <img src="../CWJ_Logo.jpg" alt="CodewithJi Logo" class="w-12 h-12 rounded-full shadow-lg">
        <div class="flex space-x-4">
          <a href="../index.html" class="text-gray-700 hover:text-blue-600">Home</a>
          <a href="./about.html" class="text-gray-700 hover:text-blue-600">About</a>
          <a href="./audit.html" class="text-gray-700 hover:text-blue-600">Free Audit</a>
        </div>
      </div>
    </div>
    </nav>
    <!-- Main Content -->
    <!-- Contact Section -->
     <h2 class="text-center text-3xl font-bold text-blue-600 text- mb-8">Let's Connect</h2>

  <section id="contact" class="py-16 bg-white">
    <div class="max-w-xl mx-auto px-4">
      <label class="bg-center">Please submit your contact information</label>
      <div id="successMessage" class="success-message">
        <p>✅ Message sent successfully! We'll get back to you soon.</p>
      </div>
      
      <div id="errorMessage" class="error-message">
        <p>❌ There was an error sending your message. Please try again.</p>
      </div>
      <form id="contactForm" class="space-y-6">
        <div id="formMessage" class="hidden p-4 rounded-lg"></div>
        <div>
          <label class="block text-gray-700 mb-2">Name *</label>
          <input type="text" id="name" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <div>
          <label class="block text-gray-700 mb-2">Email</label>
          <input type="email" id="email" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
        </div>
        <div>
          <label class="block text-gray-700 mb-2">Phone Number</label>
          <input type="text" id="phone" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline0">
        </div>
        <div>
          <label class="block text-gray-700 mb-2">Company Name</label>
          <input type="text" id="company" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <div>
          <label class="block text-gray-700 mb-2">Brief Project Description</label>
          <input type="text" id="brief" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>
        <button id="submitBtn" type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          <span id="buttonText">Submit</span>
          <span id="loadingSpinner" class="loading" style="display: none;"></span>
        </button>
      </form>
    </div>
  </section>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('contactForm');
      const submitBtn = document.getElementById('submitBtn');
      const buttonText = document.getElementById('buttonText');
      const loadingSpinner = document.getElementById('loadingSpinner');
      const successMessage = document.getElementById('successMessage');
      const errorMessage = document.getElementById('errorMessage');
      
      // Updated URL with CORS proxy
      const SCRIPT_URL = 'https://corsproxy.io/?https://script.google.com/macros/s/AKfycbyabJvVvRjKRZxQedYnr1Bl5LsnXCCW44QoQZ1EJlfet54fkSnN6kf8cI-lvqtMVFLn/exec';
      
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Show loading state
        submitBtn.disabled = true;
        buttonText.textContent = 'Sending...';
        loadingSpinner.style.display = 'inline-block';
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
        
        const formData = {
          name: form.name.value,
          email: form.email.value,
          brief: form.brief.value,
          company: form.company.value,
          phone: form.phone.value,
        };
        
        try {
          // Using CORS proxy to bypass CORS restrictions
          const response = await fetch(SCRIPT_URL, {
            method: 'POST',
            body: JSON.stringify(formData),
            headers: { 'Content-Type': 'application/json' }
          });
          
          const result = await response.json();
          if (result.success) {
            // Show success message
            successMessage.style.display = 'block';
            form.reset();
          } else {
            throw new Error(result.error || 'Failed to send');
          }
        } catch (error) {
          console.error('Submission error:', error);
          errorMessage.style.display = 'block';
        } finally {
          // Reset button state
          submitBtn.disabled = false;
          buttonText.textContent = 'Submit';
          loadingSpinner.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
